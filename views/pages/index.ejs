<%- include ('../partials/header') %>
<h2>All tasks</h2>

<form method="POST" action="/tasks">
  <label for="title">Title</label>
  <input type="text" id="title" name="title" required />

  <label for="description">Description</label>
  <input type="text" id="description" name="description" />

  <label for="status">status:</label>
  <select id="status" name="status">
    <option value="To Do">To Do</option>
    <option value="In Progress">In progress</option>
    <option value="Done">Done</option>
  </select>

  <button type="submit">Add task</button>
</form>

<form method="GET" action="/tasks">
  <label for="statusFilter"> Filter by status</label>
  <select id="statusFilter" name="status">
    <option value="">All</option>
    <option value="To Do">To Do</option>
    <option value="In progress">In progress</option>
    <option value="Done">Done</option>
  </select>
  <Button type="submit">Filter</Button>
</form>

<ul>
  <% tasks.forEach(task => { %>
  <li>
    <h2><%= task.title %> (<%= task.status %>)</h2>
    <p><%= task.description %></p>

    <a href="/tasks/<%= task._id %>/edit">Edit</a>

    <form method="POST" action="/tasks/<%= task._id %>/delete">
      <button type="submit">Delete</button>
    </form>
  </li>
  <% }) %>
</ul>

<%- include ('../partials/footer') %>
